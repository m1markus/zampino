(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d212f77"],{ab55:function(e,s,n){"use strict";n.r(s);var t=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("q-page",{staticClass:"flex flex-center"},[n("div",{staticClass:"q-pa-md"},[e.showNickSelect?n("div",{staticClass:"row q-gutter-md"},[n("div",{staticClass:"col-12"},[n("q-input",{attrs:{label:"Nickname"},on:{input:e.handleNicknameInput},model:{value:e.nickname,callback:function(s){e.nickname=s},expression:"nickname"}})],1),n("div",{staticClass:"col-12"},[n("q-btn",{attrs:{disable:e.isJoinDisabled,color:"primary",label:"Join","no-caps":""},on:{click:e.handleJoin}})],1)]):e._e(),e.showNickSelect?e._e():n("div",{staticClass:"q-pa-md row justify-center"},[n("div",{staticStyle:{width:"100%","max-width":"400px"}},e._l(e.chatHistory,function(e){return n("zamp-chat-message",{key:e.id,attrs:{message:e}})}),1),n("div",{staticClass:"row q-gutter-md"},[n("q-input",{attrs:{outlined:"",label:"Your message"},model:{value:e.nextMessage,callback:function(s){e.nextMessage=s},expression:"nextMessage"}}),n("q-btn",{attrs:{color:"primary",label:"Send","no-caps":""},on:{click:e.handleSend}})],1)])])])},a=[],o=(n("7f7f"),n("6762"),n("2fdb"),function(){var e=this,s=e.$createElement,n=e._self._c||s;return 1==e.message.me?n("q-chat-message",{attrs:{sent:"",name:e.message.name,text:e.message.message}}):n("q-chat-message",{attrs:{name:e.message.name,text:e.message.message}})}),i=[],c={name:"ZampChatMessage",props:["message"],data:function(){return{dummy:!1}},methods:{dummyFunc1:function(){}}},l=c,r=n("2877"),m=Object(r["a"])(l,o,i,!1,null,null,null),d=m.exports,u={name:"Chat",data:function(){return{ws:void 0,isJoinDisabled:!0,showNickSelect:!0,nickname:"",nextMessage:"",messageIndex:0,chatHistory:[]}},mounted:function(){this.wsConnect()},methods:{wsConnect:function(){var e=null;e=location.protocol.includes("https")?"wss":"ws";var s=new WebSocket(e+"://"+location.host+"/api/v1/wsocket"),n=this.chatHistory;s.onmessage=function(e){console.log("new peer message received:",e.data);var s=JSON.parse(e.data),t={id:this.messageIndex++,me:!1,name:s.name,message:s.message};n.push(t)},s.onerror=function(e){console.error("WebSocket error observed:",e),s.close()},s.onopen=function(e){console.log("WebSocket is open now:",e)},s.onclose=function(e){console.log("WebSocket is closed now:",e)},this.ws=s},handleSend:function(){this.addLocalMessage()},addRemoteMessage:function(){},addLocalMessage:function(){var e={id:this.messageIndex++,me:!0,name:this.nickname,message:[this.nextMessage]};this.chatHistory.push(e);var s=JSON.stringify(e);this.ws.send(s)},handleJoin:function(){""!==this.nickname&&(this.showNickSelect=!1)},handleNicknameInput:function(e){if(void 0!==e){var s=e.length;this.isJoinDisabled=!(s>0)}}},components:{"zamp-chat-message":d}},h=u,g=Object(r["a"])(h,t,a,!1,null,null,null);s["default"]=g.exports}}]);